{% extends "base.html" %}
{% block content %}
<style>
 body {
    background: linear-gradient(90deg, #eaffea, #b8f5b8);
  }

  /* 🔹 Contenedor principal */
  .form-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    min-height: calc(100dvh - 180px);
    padding: 2dvh 3vw;
  }

  /* 🔹 Caja central más pequeña y adaptable */
  .form-box {
    background: linear-gradient(145deg, #006400, #004d00);
    color: white;
    width: 95%;
    max-width: 550px;           /* 🔸 antes era 850px */
    border-radius: 15px;
    border: 6px double white;   /* 🔸 más fino */
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
    padding: clamp(15px, 3vw, 25px);
    text-align: center;
    transition: transform 0.3s ease;
  }

  .form-box:hover {
    transform: scale(1.01);
  }

  /* 🔹 Título y subtítulo */
  .form-box h2 {
    font-size: clamp(18px, 4vw, 32px);
    margin: 0;
    font-weight: bold;
  }

  .form-box h3 {
    margin-top: 5px;
    font-size: clamp(14px, 3vw, 20px);
    color: #e7ffe7;
  }

  /* 🔹 Contenedor interior */
  .inner-box {
    background: #ebffe8;
    border-radius: 12px;
    padding: clamp(10px, 3vw, 20px);
    margin-top: 15px;
  }

  /* 🔹 Entradas más compactas */
  .input-group {
    background: #b5f1b5;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    border-radius: 8px;
    border: 2px solid #004d00;
    margin: 8px auto;
    box-sizing: border-box;
  }

  .input-group span {
    font-size: clamp(16px, 3vw, 22px);
    margin-right: 8px;
    color: #004d00;
  }

  .input-group input {
    border: 2px solid #004d00;
    outline: none;
    width: 80%;
    font-size: clamp(12px, 2vw, 18px);
    border-radius: 5px;
    padding: 5px;
    text-align: center;
    color: #004d00;
    background-color: white;
  }

  /* 🔹 Botones compactos */
  .btn-calc, .btn-info-custom {
    font-family: 'Times New Roman', Times, serif;
    font-size: clamp(13px, 2vw, 18px);
    width: 85%;
    margin-top: 15px;
    border-radius: 10px;
    transition: all 0.3s ease;
    padding: clamp(6px, 2vw, 10px);
  }

  .btn-info-custom {
    border: 2px solid #18ea26;
    background-color: white;
    color: #006400;
  }

  .btn-info-custom:hover {
    background-color: #18ea26;
    color: white;
  }

  .btn-calc {
    border: 2px solid #18ea26;
  }

  /* 🔹 Resultado */
  .resultado {
    font-size: clamp(12px, 2vw, 18px);
    color: #004d00;
    background-color: rgba(255, 255, 255, 0.85);
    padding: 8px;
    border-radius: 8px;
    margin-top: 15px;
    font-weight: bold;
  }

  /* 🔹 Ventana flotante */
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100dvw;
    height: 100dvh;
    background: rgba(0, 50, 0, 0.7);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 20;
    padding: 15px;
    box-sizing: border-box;
  }

  .definition-box {
    background: #ebffe8;
    color: #004d00;
    border-radius: 12px;
    padding: clamp(15px, 3vw, 25px);
    width: clamp(260px, 85%, 450px);
    border: 4px double #004d00;
    font-size: clamp(13px, 2vw, 16px);
    line-height: 1.5;
    text-align: left;
    box-shadow: 0 3px 15px rgba(0, 0, 0, 0.4);
    position: relative;
  }

  /* 🔹 Botón de cierre */
  .close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: clamp(16px, 3vw, 22px);
    font-weight: bold;
    color: #004d00;
    background: none;
    border: none;
    cursor: pointer;
  }

  .close-btn:hover {
    color: #008000;
  }

  /* 📱 Ajuste móvil */
  @media (max-width: 600px) {
    .input-group {
      flex-direction: column;
      text-align: center;
    }

    .input-group input {
      width: 100%;
    }

    .btn-calc, .btn-info-custom {
      width: 100%;
    }
  }

</style>

<div class="form-container">
  <div class="form-box">
    <h2>🔴 Ley de Coulomb</h2>
    <h3>F = k · (q₁ · q₂) / r²</h3>

    <button id="btnInfo" class="btn-info-custom">📘 Ver definición</button>

    <div class="inner-box">
      <form id="formCoulomb">
        <div class="input-group">
          <span>🔋</span>
          <input type="number" step="any" id="q1" placeholder="Carga q₁ (C)" required>
        </div>
        <div class="input-group">
          <span>⚡</span>
          <input type="number" step="any" id="q2" placeholder="Carga q₂ (C)" required>
        </div>
        <div class="input-group">
          <span>📏</span>
          <input type="number" step="any" id="r" placeholder="Distancia r (m)" required>
        </div>
        <button type="submit" class="btn btn-outline-success btn-calc">🧮 Calcular</button>
      </form>
    </div>

    <div id="resultado" class="resultado" style="display:none;"></div>
  </div>
</div>

<div class="overlay" id="overlay">
  <div class="definition-box">
    <button class="close-btn" id="closeOverlay">&times;</button>
    <h4>📘 Definición de la Ley de Coulomb</h4>
    <p><strong>La Ley de Coulomb</strong> establece que la fuerza eléctrica entre dos cargas es directamente proporcional
       al producto de sus cargas e inversamente proporcional al cuadrado de la distancia que las separa.</p>
    <ul>
      <li><strong>F</strong> = Fuerza eléctrica (N)</li>
      <li><strong>k</strong> = Constante de Coulomb (9 × 10⁹ N·m²/C²)</li>
      <li><strong>q₁</strong>, <strong>q₂</strong> = Cargas eléctricas (C)</li>
      <li><strong>r</strong> = Distancia entre las cargas (m)</li>
    </ul>
  </div>
</div>

<script>
  const form = document.getElementById("formCoulomb");
  const res = document.getElementById("resultado");

  form.addEventListener("submit", e => {
    e.preventDefault();

    // ✅ Obtener valores correctamente
    const q1Val = parseFloat(document.getElementById("q1").value);
    const q2Val = parseFloat(document.getElementById("q2").value);
    const rVal  = parseFloat(document.getElementById("r").value);

    if (isNaN(q1Val) || isNaN(q2Val) || isNaN(rVal) || rVal === 0) {
      res.textContent = "⚠️ Ingresa valores válidos (r ≠ 0)";
      res.style.display = "block";
      return;
    }

    // ✅ Cálculo de la Fuerza eléctrica
    const F = 8.99e9 * (q1Val * q2Val) / (rVal ** 2);
    res.textContent = `Fuerza eléctrica = ${F.toLocaleString('es-CO', { maximumFractionDigits: 3 })} N`;
    res.style.display = "block";
  });

  // ✅ Ventana modal
  const overlay = document.getElementById("overlay");
  document.getElementById("btnInfo").onclick = () => overlay.style.display = "flex";
  document.getElementById("closeOverlay").onclick = () => overlay.style.display = "none";
  overlay.addEventListener("click", e => { 
    if (e.target === overlay) overlay.style.display = "none"; 
  });
</script>

{% endblock %}
